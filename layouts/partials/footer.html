<footer class="footer mt-3 py-1">
    <div class="row py-2 pb-4">
        <div class="d-flex col justify-content-end">
            <p class="align-middle m-1">
            {{ range sort .Site.Params.social "key"}}
                <span class="mx-1 h1"><a href="{{ .url | safeURL }}" title="{{ .name }}"><i class="{{ .falogo }}"></i></a></span>
            {{ end }}
            </p>
        </div>
        <div  class="d-flex row col" style="text-align: left">
            <p class="m-1 col-12"><small id="footer-quote">Made using Hugo</small></p>
            <p class="m-0 col-12"><small> {{ .Site.Params.author.email }}</small></p>
        </div>
    </div>
</footer>

<script>
    // Array of quotes
    const quotes = [
        "pixel perfect they said..",
        "Just tellin' campfire stories",
        "Modding games are fun",
        "Nasi Dagang Ganu da best",
        "just tryin' something cool",
        "Tryin to look nowhere",
        "Dont stress too much",
        "à¶ž Suspicious ain't it?"
    ];

    // Keep track of the last displayed quote
    let lastQuoteIndex = -1;

    // Random character generator
    function getRandomChar() {
        const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()";
        return chars.charAt(Math.floor(Math.random() * chars.length));
    }

    // Function to get a new random quote index
    function getNewQuoteIndex() {
        let newIndex;
        do {
        newIndex = Math.floor(Math.random() * quotes.length);
        } while (newIndex === lastQuoteIndex); // Ensure it's not the same as the last one
        return newIndex;
    }

    // Glitch effect function
    function glitchEffect(element, newQuote, duration = 1000, glitchRate = 100) {
        const maxLength = newQuote.length;
        let currentText = element.textContent.padEnd(maxLength, " ");

        // Function to update the text with random characters
        function updateGlitch() {
        currentText = Array.from({ length: maxLength }, (_, i) => {
            if (Math.random() > 0.5) {
            return getRandomChar();
            }
            return i < currentText.length ? currentText[i] : "";
        }).join("");

        element.textContent = currentText;
        }

        // Gradually replace with new quote
        function settleText() {
        let step = 0;
        const settleInterval = setInterval(() => {
            currentText = Array.from(currentText).map((char, i) => {
            if (step >= i && i < newQuote.length) {
                return newQuote[i];
            }
            return getRandomChar();
            }).join("");

            element.textContent = currentText;
            step++;

            if (step > maxLength) {
            clearInterval(settleInterval);
            element.textContent = newQuote;
            }
        }, glitchRate / 2);
        }

        // Run glitch effect for a short duration, then settle the text
        const glitchInterval = setInterval(updateGlitch, glitchRate);
        setTimeout(() => {
        clearInterval(glitchInterval);
        settleText();
        }, duration);
    }

    // Function to update footer with glitch effect
    function updateFooterWithGlitch() {
        const footerQuote = document.getElementById("footer-quote");
        const newQuoteIndex = getNewQuoteIndex();
        lastQuoteIndex = newQuoteIndex; // Update the last displayed quote index
        const randomQuote = quotes[newQuoteIndex];
        glitchEffect(footerQuote, randomQuote);
    }

    // Update the footer quote every 10 seconds with glitch effect
    setInterval(updateFooterWithGlitch, 20000);
</script>